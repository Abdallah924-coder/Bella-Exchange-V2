<%- include('partials/header') %>
<section class="panel">
  <h1>Profil utilisateur</h1>
  <div class="profile-box">
    <p><strong>Nom:</strong> <%= currentUser.fullName %></p>
    <p><strong>Email:</strong> <%= currentUser.email %></p>
    <p><strong>Telephone:</strong> <%= currentUser.phone %></p>
  </div>

  <h2>Transactions recentes</h2>
  <div class="table-wrap">
    <table class="profile-table">
      <thead><tr><th>ID</th><th>Type</th><th>Crypto</th><th>Montant</th><th>Statut</th><th>Date</th></tr></thead>
      <tbody>
      <% if (!transactions.length) { %>
        <tr><td colspan="6">Aucune transaction.</td></tr>
      <% } %>
      <% transactions.forEach((tx) => { %>
        <tr>
          <td data-label="ID"><%= tx.id.slice(0, 8) %></td>
          <td data-label="Type"><%= tx.type %></td>
          <td data-label="Crypto"><%= tx.crypto %> / <%= tx.network %></td>
          <td data-label="Montant"><%= (tx.usdAmount || 0).toLocaleString('fr-FR') %> USD -> <%= (tx.amountFCFA || 0).toLocaleString('fr-FR') %> FCFA</td>
          <td data-label="Statut"><span class="badge <%= tx.status %>"><%= tx.status %></span></td>
          <td data-label="Date"><%= new Date(tx.createdAt).toLocaleString('fr-FR') %></td>
        </tr>
      <% }) %>
      </tbody>
    </table>
  </div>
</section>
<%- include('partials/footer') %>
